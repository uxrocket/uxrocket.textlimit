/*! UX Rocket Textlimit 
 *  Textlimit and remaining chars 
 *  @author Bilal Cinarli <bcinarli@gmail.com> (http://bcinarli.com/) 
 *          Mesut GÃ–K <mesutgok@hotmail.com> (http://mesutgok.com)
 *  @version 1.1.1 
 *  @build Fri Dec 25 2015 15:17:30 GMT+0200 (EET) 
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(t){"use strict";var n,e="uxrTextlimit",i=1,a={maxLength:0,remainingText:"Remaining Characters",remaining:".remaining",visible:!0,onReady:!1,onLimit:!1,onUpdate:!1,onRemove:!1},s={focus:"focus."+e,input:"input."+e,keyup:"keyup."+e,ready:"uxrready."+e,limit:"uxrlimit."+e,update:"uxrupdate."+e,remove:"uxrremove."+e},o={prefix:"uxr-",rocket:"uxRocket",data:e,name:"textlimit",wrap:"uxr-plugin-wrap",classes:{wrap:"wrap",ready:"ready",remaining:"remaining",hideremaining:"hide-remaining"}},r=new uxrPluginUtils({ns:o}),h=function(n,s,o){this._instance=i,this._name=e,this._defaults=a,this._remainingContent=!1,this.el=n,this.$el=t(n),this.selector=o,this.options=t.extend(!0,{},a,s,this.$el.data()),this.options.maxLength=parseInt(this.$el.attr("maxlength"))||this.options.maxLength,i++,this.init()};h.prototype.init=function(){""===this.el.id&&(this.el.id=o.data+"-"+this._instance),this.registry(),this.decorateUI(),this.bindUI(),this.emitEvent("ready")},h.prototype.decorateUI=function(){this.addClass(),this.wrap(),this.addRemaining()},h.prototype.undecorateUI=function(){this.removeClasses(),this.unwrap(),this.removeRemaining()},h.prototype.addClass=function(){this.$el.addClass(r.getClassname("ready"))},h.prototype.removeClasses=function(){this.$el.removeClass(r.getClassname("ready"))},h.prototype.addRemaining=function(){var t=this.options.maxLength-this.$el.val().length;this.$remainingContent=this.$el.siblings(this.options.remaining),this._remainingContent=this.$remainingContent.clone(),this.$parentRemainingContent=this.$el.parent().siblings(this.options.remaining),this._parentRemainingContent=this.$parentRemainingContent.clone(),0>t&&(t=0),0===this.options.maxLength&&(t=""),this.$parentRemainingContent.length>0?(this.$parentRemainingContent.text(t),this.$parentRemainingContent.attr("class",r.getClassname("remaining")),this._parentRemainingContent=!0):this.$remainingContent.length<1?(this.$el.after('<span title="'+this.options.remainingText+'" class="'+r.getClassname("remaining")+" "+this.options.remaining.substring(1,this.options.remaining.length)+'">'+t+"</span>"),this.$remainingContent=this.$el.next(),this._remainingContent=!0):this.$remainingContent.addClass(r.getClassname("remaining")).attr("title",this.options.remainingText).text(t),this.options.visible||(this.$remainingContent.hide(),this.$parentRemainingContent.hide())},h.prototype.wrap=function(){this.$el.parent().is("span")?this.$el.parent().addClass(r.getClassname("wrap")):(this.wrapped=!0,this.$el.wrap('<span class="'+r.getClassname("wrap")+'"></span>'))},h.prototype.unwrap=function(){this.wrapped?this.$el.unwrap():this.$el.parent().removeClass(r.getClassname("wrap")+" "+this.options.wrapper)},h.prototype.removeRemaining=function(){this._parentRemainingContent===!0&&this.$parentRemainingContent.remove(),this._remainingContent===!0?this.$remainingContent.remove():this.$remainingContent.replaceWith(this._remainingContent),this.$el.removeAttr("id")},h.prototype.bindUI=function(){var t=this;this.$el.on(s.keyup+" "+s.input+" "+s.focus,function(){t.checkLimit()}).on(s.ready,function(){t.onReady()}).on(s.limit,function(){t.onLimit()}).on(s.update,function(){t.onUpdate()}).on(s.remove,function(){t.onRemove()})},h.prototype.unbindUI=function(){this.$el.off("."+e)},h.prototype.checkLimit=function(){var t=this.$el.val(),n=t.length,e=this.options.maxLength-n;return 0===this.options.maxLength?n>=1?this.$remainingContent.text(n):this.$remainingContent.text(""):(0>e&&(e=0,this.$el.val(t.substring(0,this.options.maxLength))),0===e&&this.emitEvent("limit"),void(this.$parentRemainingContent.length>=1?this.$parentRemainingContent.text(e):this.$remainingContent.text(e)))},h.prototype.onReady=function(){r.callback(this.options.onReady)},h.prototype.onLimit=function(){r.callback(this.options.onLimit)},h.prototype.onUpdate=function(){r.callback(this.options.onUpdate)},h.prototype.onRemove=function(){r.callback(this.options.onRemove)},h.prototype.onDestroy=function(){r.callback(this.options.onDestroy)},h.prototype.update=function(t){return t=t||{},n.update(this.el,t)},h.prototype.destroy=function(){this.emitEvent("destroy"),this.unbindUI(),this.undecorateUI(),this.$el.removeData(e)},h.prototype.registry=function(){var t=this.$el.data(o.rocket)||{};t[o.data]={hasWrapper:!0,ready:r.getClassname("ready"),selector:this.selector,options:this.options},this.$el.data(o.rocket,t)},h.prototype.emitEvent=function(t){this.$el.trigger("uxr"+t)},n=t.fn.textlimit=t.fn.uxrtextlimit=t.uxrtextlimit=function(n){var e=this.selector;return this.each(function(){t.data(this,o.data)||t.data(this,o.data,new h(this,n,e))})},n.update=function(n,e){var i,a;"undefined"==typeof e&&"object"==typeof n?(i=t("."+r.getClassname("ready")),a=n):(i=t(n),a=e),i.filter("textarea, input").each(function(){var n=t(this),e=n.data(o.data),i=e.options;i.maxLength=parseInt(n.attr("maxlength"))||i.maxLength,e.options=t.extend(!0,{},i,a),e.checkLimit(),e.emitEvent("update")})},n.destroy=function(n){var e=t("undefined"==typeof n?"."+r.getClassname("ready"):n);e.each(function(){t(this).data(o.data).destroy()})},n.version="1.1.1",n.settings=a,n.namespace=o});