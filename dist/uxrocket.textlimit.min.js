/*! UX Rocket Textlimit 
 *  Textlimit and remaining chars 
 *  @author Bilal Cinarli <bcinarli@gmail.com> (http://bcinarli.com/) 
 *  @version 1.0.0 
 *  @build Wed Sep 30 2015 10:23:27 GMT+0300 (EEST) 
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(t){"use strict";var e,i=1,n="uxrTextlimit",a={maxLength:0,remainingWrap:!1,remainingText:"Remaining Characters",remaining:".remaining",visible:!0,onReady:!1,onLimit:!1,onUpdate:!1,onRemove:!1},s={focus:"focus."+n,input:"input."+n,keyup:"keyup."+n,ready:"uxrready."+n,limit:"uxrlimit."+n,update:"uxrupdate."+n,remove:"uxrremove."+n},o={prefix:"uxr-",rocket:"uxRocket",data:n,name:"textlimit",wrap:"uxr-plugin-wrap",classes:{wrap:"wrap",ready:"ready",remaining:"remaining",hideremaining:"hide-remaining"}},r=function(e,s,o){this._instance=i,this._name=n,this._defaults=a,this._remainingContent=!1,this.el=e,this.$el=t(e),this.selector=o,this.options=t.extend(!0,{},a,s,this.$el.data()),this.options.maxLength=parseInt(this.$el.attr("maxlength"))||this.options.maxLength,i++,this.init()};r.prototype.init=function(){var t=this.$el.data(o.rocket)||{};t[o.data]={hasWrapper:!1,ready:l.getClassname("ready"),selector:this.selector,options:this.options},this.$el.data(o.rocket,t),this.setLayout(),this.$el.addClass(l.getClassname("ready")),this.emitEvent("ready"),this.bindUIActions()},r.prototype.handleClasses=function(){this.classList=this.$el.context.className.replace(l.getClassname("ready"),""),"."===this.selector.charAt(0)&&(this.classList=this.classList.replace(this.selector.substr(1),"")),this.options.visible||(this.classList+=l.getClassname("hideremaining")+" "),this.classList+=o.wrap+" "+l.getClassname("wrap")+" "+l.getClassname("wrap")+"-"+this._instance,this.classList=t.trim(this.classList)},r.prototype.removeClasses=function(){this.$el.removeClass(l.getClassname("ready")),this.$el.parent().removeClass(this.classList.replace(o.wrap,""))},r.prototype.handleRemaining=function(){var t=this.options.maxLength-this.$el.val().length;this.$remainingContent=this.$el.siblings(this.options.remaining),this._remainingContent=this.$remainingContent.clone(),0>t&&(t=0),0===this.options.maxLength&&(t=""),this.$remainingContent.length<1?(this.$el.after('<span title="'+this.options.remainingText+'" class="'+l.getClassname("remaining")+" "+this.options.remaining.substring(1,this.options.remaining.length)+'">'+t+"</span>"),this.$remainingContent=this.$el.next(),this._remainingContent=!0):this.$remainingContent.addClass(l.getClassname("remaining")).attr("title",this.options.remainingText).text(t)},r.prototype.handleWrapper=function(){this.$el.parent().is("."+o.wrap)?this.$el.parent().addClass(this.classList):this.$el.siblings("."+l.getClassname("remaining")).andSelf().wrapAll('<span class="'+this.classList+'"></span>')},r.prototype.setLayout=function(){this.handleClasses(),this.handleRemaining(),this.handleWrapper()},r.prototype.removeRemaining=function(){this._remainingContent===!0?this.$remainingContent.remove():this.$remainingContent.replaceWith(this._remainingContent)},r.prototype.removeLayout=function(){var t=this,e=t.$el.data(o.rocket);Object.keys&&1===Object.keys(e).length?t.$el.unwrap():t.$el.parent().removeClass(o.wrap)},r.prototype.bindUIActions=function(){var t=this;this.$el.on(s.keyup+" "+s.input+" "+s.focus,function(){t.checkLimit()}).on(s.ready,function(){t.onReady()}).on(s.limit,function(){t.onLimit()}).on(s.update,function(){t.onUpdate()}).on(s.remove,function(){t.onRemove()})},r.prototype.unbindUIActions=function(){this.$el.off("."+n)},r.prototype.checkLimit=function(){var t=this.$el.val(),e=t.length,i=this.options.maxLength-e;0>i&&(i=0,this.$el.val(t.substring(0,e))),0===i&&this.emitEvent("limit"),this.$remainingContent.text(i)},r.prototype.onReady=function(){l.callback(this.options.onReady)},r.prototype.onLimit=function(){l.callback(this.options.onLimit)},r.prototype.onUpdate=function(){l.callback(this.options.onUpdate)},r.prototype.onRemove=function(){l.callback(this.options.onRemove)},r.prototype.update=function(t){return t=t||{},e.update(this.el,t)},r.prototype.destroy=function(){return e.destroy(this.el)},r.prototype.emitEvent=function(t){this.$el.trigger("uxr"+t)};var l={callback:function(t){if("function"==typeof t)t.apply(this);else if(t!==!1){for(var e=/([a-zA-Z._$0-9]+)(\(?(.*)?\))?/.exec(t),i=e[1].split("."),n=e[3]?e[3]:"",a=i.pop(),s=i[0]?window[i[0]]:window,o=1;o<i.length;o++)s=s[i[o]];return s[a](n)}},getStringVariable:function(t){var e;if(t.indexOf(".")>-1){for(var i=t.split("."),n=window[i[0]],a=1;a<i.length;a++)n=n[i[a]];e=n}else e=window[t];return e},getClassname:function(t){return o.prefix+o.name+"-"+o.classes[t]}};e=t.fn.textlimit=t.fn.uxrtextlimit=t.uxrtextlimit=function(e){var i=this.selector;return this.each(function(){t.data(this,o.data)||t.data(this,o.data,new r(this,e,i))})},e.update=function(e,i){var n,a;"undefined"==typeof i&&"object"==typeof e?(n=t("."+l.getClassname("ready")),a=e):(n=t(e),a=i),n.filter("textarea, input").each(function(){var e=t(this),i=e.data(o.data),n=i.options;n.maxLength=parseInt(e.attr("maxlength"))||n.maxLength,i.options=t.extend(!0,{},n,a),i.checkLimit(),i.emitEvent("update")})},e.destroy=function(e){var i=t(void 0!==e?e:"."+l.getClassname("ready"));i.filter("textarea, input").each(function(){var e=t(this),i=e.data(o.data),n=e.data(o.rocket);i.removeClasses(),i.unbindUIActions(),i.removeRemaining(),i.removeLayout(),e.removeData(o.data),delete n[o.data],e.data(o.rocket,n),l.callback(i.options.onRemove)})},e.version="1.0.0",e.settings=a,e.namespace=o});